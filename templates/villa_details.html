{% extends 'base.html' %}
{% block content %}

<style>
    /* Premium Styling */
    .villa-title-detail {
        background: linear-gradient(45deg, #ff416c, #ff4b2b);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 850; font-size: 2.5rem;
    }
    .carousel-item img { height: 500px; object-fit: cover; border-radius: 25px; }
    @media (max-width: 768px) { .carousel-item img { height: 300px; } }

    .highlight-badge { background: #f0f7ff; border: 1px solid #cfe2ff; border-radius: 15px; padding: 15px; text-align: center; height: 100%; }
    .rule-card { border-left: 4px solid #ff4757; background: #fff5f6; padding: 15px; border-radius: 0 15px 15px 0; margin-bottom: 10px; }
    
    /* Price Detail Styles */
    .detail-original-price { text-decoration: line-through; color: #adb5bd; font-size: 1.2rem; display: block; margin-bottom: -5px; }
    .savings-badge { background: #e8f5e9; color: #2e7d32; padding: 4px 10px; border-radius: 6px; font-size: 0.85rem; font-weight: bold; border: 1px dashed #2e7d32; }
    .offer-banner { position: absolute; top: 20px; left: 20px; z-index: 10; background: #ff4757; color: white; padding: 8px 20px; border-radius: 50px; font-weight: 800; box-shadow: 0 4px 15px rgba(255,71,87,0.4); }

    /* Sticky Mobile Footer */
    @media (max-width: 767px) {
        .mobile-booking-bar {
            position: fixed; bottom: 0; left: 0; right: 0; background: white;
            padding: 12px 20px; box-shadow: 0 -10px 30px rgba(0,0,0,0.1);
            z-index: 1000; display: flex; justify-content: space-between; align-items: center;
        }
        body { padding-bottom: 80px; }
    }
</style>

<div class="container py-4">
    <div id="villaSlider" class="carousel slide shadow-lg position-relative" data-bs-ride="carousel" style="border-radius: 25px; overflow: hidden;">
        {% if villa.discount_perc > 0 %}
            <div class="offer-banner">ðŸ”¥ {{ villa.discount_perc }}% OFF TODAY</div>
        {% endif %}
        
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="{{ villa.Image_URL }}" class="d-block w-100" alt="Main Image">
            </div>
            {% for img in villa_images %}
                {% if img != villa.Image_URL %}
                <div class="carousel-item">
                    <img src="{{ img }}" class="d-block w-100" alt="Gallery">
                </div>
                {% endif %}
            {% endfor %}
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#villaSlider" data-bs-slide="prev"><span class="carousel-control-prev-icon"></span></button>
        <button class="carousel-control-next" type="button" data-bs-target="#villaSlider" data-bs-slide="next"><span class="carousel-control-next-icon"></span></button>
    </div>

    <div class="row mt-5">
        <div class="col-md-8">
            <h1 class="villa-title-detail mb-3">{{ villa.Villa_Name }}</h1>
            <p class="text-muted"><i class="bi bi-geo-alt-fill text-danger"></i> Lonavala, Maharashtra</p>

            <hr>

            <div class="my-5">
                <h4 class="fw-bold mb-3">âœ¨ Experience Private Pool Luxury</h4>
                <p class="fs-5 text-secondary" style="line-height: 1.8;">
                    Welcome to your exclusive escape in Lonavala â€” a beautifully designed private pool villa crafted for unforgettable celebrations and peaceful mountain getaways. 
                    Spend your day relaxing by the <b>turquoise pool</b> and end your night with music, BBQ & warm ambient lights.
                </p>
                
                <div class="row g-3 mt-4">
                    <div class="col-md-6">
                        <h6 class="fw-bold text-primary">ðŸŽ‰ Perfect For</h6>
                        <ul class="small text-muted">
                            <li>Birthday Celebrations & Pool Parties</li>
                            <li>Pre-wedding Gatherings</li>
                            <li>Family Vacations & Corporate Trips</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="row g-3 mb-5">
                <div class="col-4">
                    <div class="highlight-badge">
                        <i class="bi bi-people fs-3 text-primary"></i>
                        <div class="fw-bold small mt-1">{{ villa.Guests }} Guests</div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="highlight-badge">
                        <i class="bi bi-door-open fs-3 text-primary"></i>
                        <div class="fw-bold small mt-1">{{ villa.BHK }} BHK</div>
                    </div>
                </div>
                <div class="col-4">
                    <div class="highlight-badge">
                        <i class="bi bi-water fs-3 text-primary"></i>
                        <div class="fw-bold small mt-1">Private Pool</div>
                    </div>
                </div>
            </div>

            <div class="my-5">
                <h4 class="fw-bold mb-4"><i class="bi bi-shield-exclamation text-danger me-2"></i>Villa Rules</h4>
                <div class="rule-card">
                    <p class="mb-0 small text-dark"><b>Check-in:</b> 01:00 PM | <b>Check-out:</b> 11:00 AM</p>
                </div>
                <div class="rule-card">
                    <p class="mb-0 small text-dark">Music allowed outdoors till 10:00 PM as per local laws.</p>
                </div>
                <div class="rule-card">
                    <p class="mb-0 small text-dark">Valid ID proofs required for all guests during check-in.</p>
                </div>
                <div class="rule-card">
                    <p class="mb-0 small text-dark">Security deposit might be applicable at the time of arrival.</p>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card border-0 shadow-lg rounded-4 p-4 sticky-top" style="top: 100px; z-index: 10;">
                <h5 class="fw-bold">Book Your Stay</h5>
                <hr>
                
                {% if villa.Price and villa.Price|float > 0 %}
                    <div class="mb-3">
                        {% if villa.Original_Price and villa.Original_Price|float > villa.Price|float %}
                            <span class="detail-original-price">â‚¹{{ villa.Original_Price|int }}</span>
                            <div class="mb-2"><span class="savings-badge">You Save â‚¹{{ (villa.Original_Price|float - villa.Price|float)|int }}</span></div>
                        {% endif %}
                        <div class="d-flex align-items-baseline">
                            <span class="fs-1 fw-bold text-primary">â‚¹{{ villa.Price|int }}</span>
                            <span class="text-muted ms-2">/ night</span>
                        </div>
                    </div>
                {% else %}
                    <h4 class="text-primary fw-bold mb-3">Price on Request</h4>
                {% endif %}

                <div class="bg-warning-subtle p-3 rounded-3 mb-4 text-center">
                    <h6 class="fw-bold text-danger mb-1">âš¡ Instant Confirmation</h6>
                    <small>Only few dates left for this month!</small>
                </div>

                <a href="https://wa.me/918830024994?text=Hi,%20I%20am%20interested%20in%20booking%20{{ villa.Villa_Name|urlencode }}" class="btn btn-success w-100 rounded-pill py-3 fw-bold mb-3 shadow">
                    <i class="bi bi-whatsapp me-2"></i>BOOK ON WHATSAPP
                </a>
                
                <a href="/enquiry/{{ villa.Villa_ID }}" class="btn btn-outline-primary w-100 rounded-pill py-2 fw-bold">
                    SEND INQUIRY FORM
                </a>
            </div>
        </div>
    </div>
</div>

<div class="mobile-booking-bar d-md-none">
    <div>
        {% if villa.Original_Price and villa.Original_Price|float > villa.Price|float %}
            <small class="text-decoration-line-through text-muted">â‚¹{{ villa.Original_Price|int }}</small>
        {% endif %}
        <div class="fw-bold fs-4 text-primary" style="margin-top: -5px;">
            â‚¹{{ villa.Price|int if villa.Price else 'On Request' }}
        </div>
    </div>
    <a href="https://wa.me/918830024994?text=I%20want%20to%20book%20{{ villa.Villa_Name|urlencode }}" class="btn btn-success rounded-pill px-4 py-2 fw-bold shadow">
        <i class="bi bi-whatsapp me-1"></i> BOOK NOW
    </a>
</div>

{% endblock %}
