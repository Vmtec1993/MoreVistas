# --- ADMIN CONFIG ---
ADMIN_USER = "Admin"      # Aapka Username
ADMIN_PASS = "MV@2026"   # Aapka Password

@app.route('/admin-login', methods=['GET', 'POST'])
def admin_login():
    if request.method == 'POST':
        user_input = request.form.get('username')
        pass_input = request.form.get('password')
        
        # Check Username and Password
        if user_input == ADMIN_USER and pass_input == ADMIN_PASS:
            from flask import session
            session['logged_in'] = True
            return redirect(url_for('admin_dashboard'))
        else:
            # Agar galat ho toh wapas login par bhejein (Optional: aap error message bhi dikha sakte hain)
            return redirect(url_for('admin_login'))
            
    return render_template('admin_login.html')

@app.route('/admin')
def admin_dashboard():
    from flask import session
    if not session.get('logged_in'):
        return redirect(url_for('admin_login'))
    
    # Baki ka data fetch karne wala purana code...
    villas = get_rows(sheet)
    enquiries = []
    if enquiry_sheet:
        try:
            data = enquiry_sheet.get_all_values()
            if len(data) > 1:
                headers = data[0]
                for row in data[1:]:
                    enquiries.append(dict(zip(headers, row)))
        except: pass
    
    return render_template('admin_dashboard.html', villas=villas, enquiries=enquiries[::-1])

@app.route('/admin-logout')
def admin_logout():
    from flask import session
    session.pop('logged_in', None)
    return redirect(url_for('index'))
    
