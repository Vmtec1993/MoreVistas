{% extends 'base.html' %}
{% block content %}
<div class="container py-5">
    <div class="text-center mb-5">
        <h1 class="fw-bold display-5">The MoreVistas Collection</h1>
        <p class="text-muted">Discover hidden gems and luxury corners</p>
        <div class="mx-auto bg-warning" style="height: 3px; width: 60px;"></div>
    </div>

    <div class="d-flex justify-content-center flex-wrap gap-2 mb-5">
        <button class="filter-btn active" onclick="filterGallery('all', this)">All Moments</button>
        <button class="filter-btn" onclick="filterGallery('pool', this)">üåä Private Pools</button>
        <button class="filter-btn" onclick="filterGallery('bedroom', this)">üõèÔ∏è Royal Suites</button>
        <button class="filter-btn" onclick="filterGallery('garden', this)">üåø Nature Views</button>
    </div>

    <div class="row g-4" id="gallery-grid">
        {% for villa in villas %}
            {% for key in ['Image_Main', 'Image_2', 'Image_3'] %}
                {% if villa[key] %}
                <div class="col-lg-4 col-md-6 gallery-item {{ villa.Category | lower | replace(' ', '') }}">
                    <div class="premium-box" onclick="openFullScreen('{{ villa[key] }}')">
                        <img src="{{ villa[key] }}" class="img-fluid" alt="Luxury Villa">
                        <div class="premium-overlay">
                            <div class="content">
                                <span class="badge bg-warning text-dark mb-2">{{ villa.Category }}</span>
                                <h5 class="text-white fw-bold">{{ villa.Name }}</h5>
                                <p class="small text-white-50">Click to expand experience</p>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
            {% endfor %}
        {% endfor %}
    </div>
</div>

<style>
    /* Premium Filter Buttons */
    .filter-btn {
        background: white; border: 1px solid #ddd; padding: 10px 25px;
        border-radius: 50px; font-weight: 500; transition: 0.3s; color: #0f172a;
    }
    .filter-btn:hover, .filter-btn.active {
        background: #0f172a; color: #fbbf24; border-color: #0f172a; transform: translateY(-3px);
    }

    /* Premium Box Effect */
    .premium-box {
        position: relative; border-radius: 20px; overflow: hidden; height: 350px;
        cursor: pointer; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    .premium-box img { width: 100%; height: 100%; object-fit: cover; transition: 0.8s; }
    .premium-box:hover img { transform: scale(1.15) rotate(2deg); filter: blur(2px); }

    .premium-overlay {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: linear-gradient(to top, rgba(15,23,42,0.9), transparent);
        display: flex; align-items: flex-end; padding: 30px;
        opacity: 0; transition: 0.4s;
    }
    .premium-box:hover .premium-overlay { opacity: 1; }
    
    .premium-overlay .content { transform: translateY(20px); transition: 0.4s; }
    .premium-box:hover .premium-overlay .content { transform: translateY(0); }

    /* Modal Styling */
    .fullscreen-modal {
        display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.95); align-items: center; justify-content: center;
    }
    .modal-content { max-width: 85%; max-height: 85%; border: 5px solid rgba(255,255,255,0.1); }
</style>

<script>
    function filterGallery(category, btn) {
        let items = document.querySelectorAll('.gallery-item');
        let buttons = document.querySelectorAll('.filter-btn');
        buttons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        items.forEach(item => {
            item.style.opacity = '0';
            setTimeout(() => {
                if (category === 'all' || item.classList.contains(category)) {
                    item.style.display = 'block';
                    setTimeout(() => item.style.opacity = '1', 50);
                } else {
                    item.style.display = 'none';
                }
            }, 300);
        });
    }
    // (openFullScreen and closeFullScreen same as before)
</script>
{% endblock %}
